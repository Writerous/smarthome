image: node:latest

# Cache modules in between jobs
cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
        - .npm/

stages:
    - build
    - test

build:
    stage: build
    before_script:
        - npm ci --cache .npm --prefer-offline
    script: npm run build

test:
    stage: test
    script: npm run lint:es && npm test
